<?xml version="1.0" encoding="UTF-8"?>
<root BTCPP_format="4">
  <BehaviorTree ID="test">
    <Sequence>
      <LogInfo logger="{ros_log}"
               message="Trying to Plan Path..."/>
      <Fallback>
        <Sequence>
          <LogInfo logger="{ros_log}"
                   message="Path Planning Looping..."/>
          <RetryUntilSuccessful num_attempts="5">
            <CallGeneratePlan start_pose="0,0,0"
                              goal_pose="10,10,2"
                              path="{generated_path}"
                              service_name="/plan"/>
          </RetryUntilSuccessful>
          <LogInfo logger="{ros_log}"
                   message="Path Planning Successful!"/>
          <RetryUntilSuccessful num_attempts="5">
            <FollowPath path="{generated_path}"
                        action_name="/follow_path"/>
          </RetryUntilSuccessful>
        </Sequence>
        <Sequence>
          <LogInfo logger="{ros_log}"
                   message="Nope."/>
          <CallTrigger service_name="/bt_orchestrator/stop_bt"/>
        </Sequence>
      </Fallback>
    </Sequence>
  </BehaviorTree>

  <!-- Description of Node Models (used by Groot) -->
  <TreeNodesModel>
    <Action ID="CallGeneratePlan"
            editable="true">
      <input_port name="start_pose"/>
      <input_port name="goal_pose"/>
      <output_port name="path"/>
      <input_port name="service_name"/>
    </Action>
    <Action ID="CallTrigger"
            editable="true">
      <input_port name="service_name"
                  default="&quot;&quot;">Service name.</input_port>
    </Action>
    <Action ID="FollowPath"
            editable="true">
      <input_port name="path"/>
      <input_port name="action_name"/>
    </Action>
    <Action ID="LogInfo"
            editable="true">
      <input_port name="logger"
                  default="&quot;urc_bt&quot;">Logger to use.</input_port>
      <input_port name="message"
                  default="&quot;Replace this with the true message.&quot;">Message to log.</input_port>
    </Action>
  </TreeNodesModel>

</root>
